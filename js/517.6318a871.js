"use strict";(self["webpackChunkgimko"]=self["webpackChunkgimko"]||[]).push([[517],{89:function(e,n){n.Z=(e,n)=>{const l=e.__vccOpts||e;for(const[i,s]of n)l[i]=s;return l}},8244:function(e,n,l){l.r(n),l.d(n,{default:function(){return dn}});l(7658);var i=l(3396),s=l(7139),a=l(9242),u=l.p+"img/lonely_1280x853.ceebfa75.jpg",t=l(2392),r=(l(223),l(4287));const c=async(e,n)=>{console.log("Getting document: "+n);const l=await(0,r.QT)((0,r.JU)(t.Z,e,n));return l.exists()?l:(console.log("Document not found!"),null)},o=async(e,n,l)=>{console.log("Updating document: "+n),await(0,r.r7)((0,r.JU)(t.Z,e,n),l)};var d=l(3866),v=l(4870);const p=e=>((0,i.dD)("data-v-5d3ec3c3"),e=e(),(0,i.Cn)(),e),g=p((()=>(0,i._)("h1",null,"Cilvēki",-1))),_={key:0},k=p((()=>(0,i._)("div",{class:"username-query-container"},[(0,i._)("div",{class:"bg"})],-1))),q={class:"friend-list-container"},w=p((()=>(0,i._)("h2",null,"Draugi",-1))),h={class:"friend-selector"},f={class:"friend-button hover-up"},m=p((()=>(0,i._)("div",{class:"bg op-20"},null,-1))),b=[m],y={key:1},R={key:0,class:"search-result-container"},F=p((()=>(0,i._)("h2",null,"Meklēšanas rezultāti:",-1))),D={class:"search-result"},U={class:"search-result-buttons"},C={key:0},H=["onClick"],x=p((()=>(0,i._)("p",null,"PIEVIENOT DRAUGU",-1))),O=p((()=>(0,i._)("div",{class:"bg op-30"},null,-1))),E=[x,O],I=["onClick"],z=p((()=>(0,i._)("p",null,"PIEŅEMT DRAUGA PIEPRASĪJUMU",-1))),Z=p((()=>(0,i._)("div",{class:"bg op-30"},null,-1))),J=[z,Z],P=["onClick"],A=p((()=>(0,i._)("p",null,"PIEVIENOT KOKAM",-1))),K=p((()=>(0,i._)("div",{class:"bg op-30"},null,-1))),N=[A,K],T=p((()=>(0,i._)("div",{class:"bg op-30"},null,-1))),j=p((()=>(0,i._)("div",{class:"bg op-100"},null,-1))),M={class:"username-query-container"},Y=p((()=>(0,i._)("h2",null,"Meklēt kādu",-1))),G=p((()=>(0,i._)("p",null,"Meklēt",-1))),V=p((()=>(0,i._)("div",{class:"bg accent"},null,-1))),S=[G,V],Q=p((()=>(0,i._)("div",{class:"bg"},null,-1))),L={key:0},B={key:1,class:"add-to-tree"},W=p((()=>(0,i._)("h3",{style:{"text-align":"center"}},"Pievienot kokam",-1))),X={class:"tree-selector"},$={class:"user-tree"},ee=["onClick"],ne=p((()=>(0,i._)("p",null,"PIEVIENOT",-1))),le=p((()=>(0,i._)("div",{class:"bg op-30"},null,-1))),ie=[ne,le],se=["onClick"],ae=p((()=>(0,i._)("p",null,"NOŅEMT",-1))),ue=p((()=>(0,i._)("div",{class:"bg op-30"},null,-1))),te=[ae,ue],re=p((()=>(0,i._)("div",{class:"bg op-20"},null,-1))),ce={key:0,style:{"text-align":"center",width:"100%"}},oe=p((()=>(0,i._)("div",{class:"bg op-20"},null,-1))),de=p((()=>(0,i._)("p",null,"Pievienot Kokam",-1))),ve=p((()=>(0,i._)("div",{class:"bg"},null,-1))),pe=[de,ve],ge=p((()=>(0,i._)("p",null,"Aizvērt",-1))),_e=p((()=>(0,i._)("div",{class:"bg op-20"},null,-1))),ke=[ge,_e],qe=p((()=>(0,i._)("p",null,"Drauga pieprasījumi",-1))),we=p((()=>(0,i._)("div",{class:"bg accent op-50"},null,-1))),he=[qe,we],fe={class:"friend-requests"},me=p((()=>(0,i._)("h3",null,"Ienākošie pieprasījumi:",-1))),be={class:"request"},ye=["onClick"],Re=p((()=>(0,i._)("p",null,"Noraidīt",-1))),Fe=p((()=>(0,i._)("div",{class:"bg"},null,-1))),De=[Re,Fe],Ue=["onClick"],Ce=p((()=>(0,i._)("p",null,"Pieņemt",-1))),He=p((()=>(0,i._)("div",{class:"bg"},null,-1))),xe=[Ce,He],Oe={key:1},Ee={class:"pending-requests"},Ie=p((()=>(0,i._)("h3",null,"Sūtītie pieprasījumi:",-1))),ze={class:"request"},Ze=["onClick"],Je=p((()=>(0,i._)("p",null,"Atcelt",-1))),Pe=p((()=>(0,i._)("div",{class:"bg"},null,-1))),Ae=[Je,Pe],Ke={key:1},Ne=p((()=>(0,i._)("p",null,"Aizvērt",-1))),Te=p((()=>(0,i._)("div",{class:"bg op-30"},null,-1))),je=[Ne,Te],Me=p((()=>(0,i._)("div",{class:"bg secondary op-40"},null,-1))),Ye={class:"friend-list-container"},Ge=p((()=>(0,i._)("h1",null,"Draugi",-1))),Ve={key:0,class:"friend-selector"},Se={class:"friend-panel"},Qe=["onClick"],Le=p((()=>(0,i._)("p",null,"Info",-1))),Be=p((()=>(0,i._)("div",{class:"bg op-50"},null,-1))),We=[Le,Be],Xe=["onClick"],$e=p((()=>(0,i._)("p",null,"Noņemt draugu",-1))),en=p((()=>(0,i._)("div",{class:"bg red op-50"},null,-1))),nn=[$e,en],ln=p((()=>(0,i._)("div",{class:"bg op-20"},null,-1))),sn={key:1},an=p((()=>(0,i._)("img",{class:"lonely",src:u},null,-1))),un=p((()=>(0,i._)("p",null,"Vientuļi...",-1))),tn=[an,un];var rn={__name:"People",setup(e){const n=(0,v.iH)(),l=(0,v.iH)(),u=async()=>{console.log("Getting user!"),l.value=(0,d.v0)();const e=await(0,r.QT)((0,r.JU)(t.Z,"users",l.value.currentUser.uid));e.exists()?(console.log("Got user!"),n.value=e.data()):console.log("User not found!")},p=(0,v.iH)([]),m=async()=>{await n.value.trees.forEach((async e=>{p.value.push((await c("/trees",e)).data())}))},x=async e=>{const n=await(0,r.QT)((0,r.JU)(t.Z,"users",e));if(n.exists())return n},O=async e=>{const n=(0,r.IO)((0,r.hJ)(t.Z,"users"),(0,r.ar)("username","==",e)),l=await(0,r.PL)(n),i=[];return l.forEach((e=>{console.log(e),i.push(e)})),i[0]},z=(0,v.iH)(""),Z=(0,v.iH)(),A=async()=>{await O(z.value).then((e=>{Z.value=[e]}))},K=(0,v.iH)(),G=(0,v.iH)(),V=(0,v.iH)([]),ne=(0,v.iH)([]),le=()=>{n.value.incomingFriendReq.forEach((async e=>{const n=await x(e);V.value.push(n.data())})),n.value.sentFriendReq.forEach((async e=>{const n=await x(e);ne.value.push(n.data())}))},ae=async e=>{let i=(await x(e)).data();await(0,r.r7)((0,r.JU)(t.Z,"users",e),{incomingFriendReq:[...i.sentFriendReq,l.value.currentUser.uid]}),n.value.sentFriendReq.push(e),await(0,r.r7)((0,r.JU)(t.Z,"users",l.value.currentUser.uid),{sentFriendReq:[...n.value.sentFriendReq]}),ne.value.push(i),console.log("Sent friend request")},ue=async e=>{const i=(await x(e)).data();V.value.splice(n.value.incomingFriendReq.indexOf(e),1),ge.value.push(i),n.value.incomingFriendReq.splice(n.value.incomingFriendReq.indexOf(e),1),n.value.friends.push(e),await(0,r.r7)((0,r.JU)(t.Z,"users",l.value.currentUser.uid),{incomingFriendReq:[...n.value.incomingFriendReq],friends:[...n.value.friends]}),i.sentFriendReq.splice(i.sentFriendReq.splice(l.value.currentUser.uid),1),await(0,r.r7)((0,r.JU)(t.Z,"users",e),{sentFriendReq:[...i.sentFriendReq],friends:[...i.friends,l.value.currentUser.uid]})},de=async e=>{const i=(await x(e)).data();V.value.splice(n.value.incomingFriendReq.indexOf(e),1),i.sentFriendReq.splice(i.sentFriendReq.indexOf(l.value.currentUser.uid)),n.value.incomingFriendReq.splice(i.incomingFriendReq.indexOf(e)),o("/users",e,{sentFriendReq:[...i.sentFriendReq]}),o("/users",l.value.currentUser.uid,{incomingFriendReq:[...n.value.incomingFriendReq]})},ve=async e=>{const i=(await x(e)).data();ne.value.splice(n.value.sentFriendReq.indexOf(e),1),i.incomingFriendReq.splice(i.incomingFriendReq.indexOf(l.value.currentUser.uid),1),n.value.sentFriendReq.splice(n.value.sentFriendReq.indexOf(e),1),o("/users",e,{incomingFriendReq:[...i.incomingFriendReq]}),o("/users",l.value.currentUser.uid,{sentFriendReq:[...n.value.sentFriendReq]})},ge=(0,v.iH)([]),_e=()=>{n.value.friends.forEach((async e=>{const n=await c("/users",e);ge.value.push(n.data())}))},qe=async e=>{const i=(await c("/users",e)).data();i.friends.splice(i.friends.indexOf(l.value.currentUser.uid),1),n.value.friends.splice(n.value.friends.indexOf(e),1),o("/users",e,{friends:[...i.friends]}),o("/users",l.value.currentUser.uid,{friends:[...n.value.friends]})},we=async e=>{const n=(await c("/users",e)).data();K.value=n,G.value=e},Re=async(e,n)=>{const l=(await x(e)).data();await(0,r.r7)((0,r.JU)(t.Z,"users",e),{trees:[...l.trees,n]}),location.reload()},Fe=async(e,n)=>{const l=(await x(e)).data();l.trees.splice(l.trees.indexOf(n),1),await(0,r.r7)((0,r.JU)(t.Z,"users",e),{trees:[...l.trees]}),location.reload()},Ce=(0,v.iH)(!1),He=(0,v.iH)(!1),Je=()=>{K.value=null,G.value=null,Ce.value=!1};return(0,i.bv)((async()=>{document.title="gimko | Cilvēki",await u(),le(),await m(),_e(),console.log(n.value)})),(e,u)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[g,n.value?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",_,[k,(0,i._)("div",q,[w,(0,i._)("div",h,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Array(5).keys(),(e=>((0,i.wg)(),(0,i.iD)("div",f,b)))),256))])])])),n.value?((0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("h2",null,"Sveiks, "+(0,s.zw)(n.value.username)+"!",1),Z.value?((0,i.wg)(),(0,i.iD)("div",R,[F,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Z.value,(e=>((0,i.wg)(),(0,i.iD)("div",D,[(0,i._)("h2",null,(0,s.zw)(e.data().username),1),(0,i._)("div",U,[e.id==l.value.currentUser.uid?((0,i.wg)(),(0,i.iD)("h2",C," Šis esi Tu! ")):(0,i.kq)("",!0),n.value.friends.includes(e.id)||n.value.incomingFriendReq.includes(e.id)||n.value.sentFriendReq.includes(e.id)||l.value.currentUser.uid==e.id?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:1,class:"hover-up-p",onClick:n=>ae(e.id)},E,8,H)),n.value.incomingFriendReq.includes(e.id)?((0,i.wg)(),(0,i.iD)("button",{key:2,class:"hover-up-p",onClick:n=>ue(e.id)},J,8,I)):(0,i.kq)("",!0),n.value.friends.includes(e.id)?((0,i.wg)(),(0,i.iD)("button",{key:3,class:"hover-up-p",onClick:()=>{He.value=!0,K.value=e.data(),G.value=e.id,we(e.id)}},N,8,P)):(0,i.kq)("",!0),T]),j])))),256))])):(0,i.kq)("",!0),(0,i._)("div",M,[Y,(0,i._)("p",null,[(0,i.Uk)("Ievadi lietotājvārdu: "),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":u[0]||(u[0]=e=>z.value=e),type:"text"},null,512),[[a.nr,z.value]])]),(0,i._)("button",{class:"hover-up-p",onClick:u[1]||(u[1]=e=>A())},S),Q]),(0,i._)("div",{class:(0,s.C_)(["person-info z-10",K.value?"":"hidden-left--50"])},[K.value?((0,i.wg)(),(0,i.iD)("h2",L,(0,s.zw)(K.value.username),1)):(0,i.kq)("",!0),He.value&&K.value?((0,i.wg)(),(0,i.iD)("div",B,[W,(0,i._)("div",X,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(p.value,((e,l)=>((0,i.wg)(),(0,i.iD)("div",$,[(0,i._)("p",null,(0,s.zw)(e.name),1),(0,i._)("p",null,[K.value.trees.includes(n.value.trees[l])?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:0,class:"hover-up-p add-to-tree-btn",onClick:e=>Re(G.value,n.value.trees[l])},ie,8,ee)),G.value==e.ownerID&&K.value.trees.includes(n.value.trees[l])?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"hover-up-p add-to-tree-btn",onClick:e=>Fe(G.value,n.value.trees[l])},te,8,se)):(0,i.kq)("",!0)]),re])))),256)),0==p.value.length?((0,i.wg)(),(0,i.iD)("p",ce,"No trees")):(0,i.kq)("",!0)]),oe])):(0,i.kq)("",!0),He.value?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:2,class:"hover-up-p",onClick:u[2]||(u[2]=()=>He.value=!0)},pe)),(0,i._)("button",{class:"close-button hover-up-p",onClick:u[3]||(u[3]=e=>Je())},ke)],2),(0,i._)("button",{class:(0,s.C_)(["requests-button hover-up-p",Ce.value?"":"shown-0-0"]),onClick:u[4]||(u[4]=()=>Ce.value=!0)},he,2),(0,i._)("div",{class:(0,s.C_)(["requests-container",Ce.value?"shown-0-0":""])},[(0,i._)("div",fe,[me,V.value.length>0?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(n.value.incomingFriendReq,((e,n)=>((0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",be,[(0,i._)("p",null,[(0,i.Uk)((0,s.zw)(V.value[n].username)+" ",1),(0,i._)("button",{class:"hover-up-p",onClick:n=>de(e)},De,8,ye),(0,i._)("button",{class:"hover-up-p",onClick:n=>ue(e)},xe,8,Ue)])])])))),256)):(0,i.kq)("",!0),n.value.incomingFriendReq&&0!=n.value.incomingFriendReq.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",Oe,"Nav ienākošu pieprasījumu..."))]),(0,i._)("div",Ee,[Ie,ne.value.length>0?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(n.value.sentFriendReq,((e,n)=>((0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",ze,[(0,i._)("p",null,[(0,i.Uk)((0,s.zw)(ne.value[n].username)+" ",1),(0,i._)("button",{class:"hover-up-p",onClick:n=>ve(e)},Ae,8,Ze)])])])))),256)):(0,i.kq)("",!0),n.value.sentFriendReq&&0!=n.value.sentFriendReq.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",Ke," Nav sūtītu pieprasījumu..."))]),(0,i._)("button",{class:"close-button z-10 hover-up-p",onClick:u[5]||(u[5]=e=>Je())},je),Me],2),(0,i._)("div",Ye,[Ge,ge.value.length>0?((0,i.wg)(),(0,i.iD)("div",Ve,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.value.friends,((e,n)=>((0,i.wg)(),(0,i.iD)("div",Se,[(0,i._)("h2",null,(0,s.zw)(ge.value[n].username),1),(0,i._)("button",{class:"hover-up-p info",onClick:n=>we(e)},We,8,Qe),(0,i._)("button",{class:"hover-up-p z-5",onClick:n=>qe(e)},nn,8,Xe),ln])))),256))])):(0,i.kq)("",!0),0==n.value.friends.length?((0,i.wg)(),(0,i.iD)("div",sn,tn)):(0,i.kq)("",!0)])])):(0,i.kq)("",!0)],64))}},cn=l(89);const on=(0,cn.Z)(rn,[["__scopeId","data-v-5d3ec3c3"]]);var dn=on}}]);
//# sourceMappingURL=517.6318a871.js.map