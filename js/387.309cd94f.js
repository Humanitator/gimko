"use strict";(self["webpackChunkgimko"]=self["webpackChunkgimko"]||[]).push([[387],{4387:function(e,a,l){l.r(a),l.d(a,{default:function(){return z}});l(2801),l(1295),l(7658);var t=l(3396),u=l(9242),s=l(7139),n=l(4870),i=l(2392),r=l(3866),o=l(4287),v=l(2483),c=(l(223),l(8978));const p=(0,t._)("h1",null,"Izveidot Kontu",-1),d={key:0},g={key:1},k=(0,t._)("p",null,"Iesniegt",-1),h=(0,t._)("div",{class:"bg"},null,-1),w=[k,h],m={key:2},b=(0,t._)("p",null,"Pievienoties ar Google",-1),_=(0,t._)("div",{class:"bg accent"},null,-1),y=[b,_],f=(0,t._)("div",{class:"bg"},null,-1);var j={__name:"Register",setup(e){const a=(0,n.iH)(""),l=(0,n.iH)(""),k=(0,n.iH)(""),h=(0,v.tv)(),b=(0,n.iH)(),_=async()=>{const e=/^[a-zA-Z0-9]+$/;if(a.value.length<3||a.value.length>=16)return b.value="Lietotājvārdam jābūt no 3 līdz 16 burtu garam!",j.value=!1,!1;if(!e.test(a.value))return b.value="Lietotājvārdam jāsastāv tikai no burtiem un cipariem!",j.value=!1,!1;const l=await(0,o.QT)((0,o.JU)(i.Z,"users",a.value));return!l.exists()||(b.value="Lietotājvārds jau ir aizņemts!",j.value=!1,!1)},j=(0,n.iH)(!1),U=()=>{j.value=!0,console.log("Registering...");const e=(0,r.v0)();_().then((a=>{if(!a)return console.log("Username not valid"),void(j.value=!1);console.log("Username valid!"),(0,r.Xb)(e,l.value,k.value).then((async e=>{console.log("Successfully registered!"),await(0,o.pl)((0,o.JU)(i.Z,"users",e.user.uid),structuredClone(c.Bt)),h.push("/")})).catch((e=>{switch(console.log(e.code),e.code){case"auth/invalid-email":b.value="Nederīgs ē-pasts!";break;case"auth/user-not-found":b.value="Netika atrasts konts ar tādu ēpastu!";break;case"auth/wrong-password":b.value="Nepareiza parole!";break;case"auth/missing-password":b.value="Nav paroles!";break;case"auth/email-already-in-use":b.value="Ēpasts jau tiek lietots!";break;default:b.value="Kaut kas nogāja greizi. Mēģiniet nomainīt ē-pastu vai paroli.";break}j.value=!1}))}))},z=async()=>{if(j.value=!0,await _()){const e=new r.hJ,l=await(0,r.rh)((0,r.v0)(),e),t=await(0,o.QT)((0,o.JU)(i.Z,"users",l.user.uid));if(!t.exists()){let e=structuredClone(c.Bt);e.username=a.value,await(0,o.pl)((0,o.JU)(i.Z,"users",l.user.uid),e)}h.push("/")}};return(0,t.bv)((()=>{document.title="gimko | Reģistrēties"})),(e,n)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[p,(0,t._)("article",null,[(0,t._)("p",null,[(0,t.wy)((0,t._)("input",{type:"text",placeholder:"Lietotājvārds","onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e)},null,512),[[u.nr,a.value]])]),(0,t._)("p",null,[(0,t.wy)((0,t._)("input",{type:"text",placeholder:"Ē-pasts","onUpdate:modelValue":n[1]||(n[1]=e=>l.value=e)},null,512),[[u.nr,l.value]])]),(0,t._)("p",null,[(0,t.wy)((0,t._)("input",{type:"password",placeholder:"Parole","onUpdate:modelValue":n[2]||(n[2]=e=>k.value=e)},null,512),[[u.nr,k.value]])]),b.value?((0,t.wg)(),(0,t.iD)("p",d,(0,s.zw)(b.value),1)):(0,t.kq)("",!0),j.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("p",g,[(0,t._)("button",{class:"hover-up-p",onClick:n[3]||(n[3]=e=>U())},w)])),j.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("p",m,[(0,t._)("button",{class:"hover-up-p",onClick:n[4]||(n[4]=e=>z())},y)])),f])],64))}};const U=j;var z=U}}]);
//# sourceMappingURL=387.309cd94f.js.map