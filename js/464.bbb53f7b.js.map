{"version":3,"file":"js/464.bbb53f7b.js","mappings":"qiBAcI,MAAMA,GAAQC,EAAAA,EAAAA,IAAI,IACZC,GAAWD,EAAAA,EAAAA,IAAI,IAEfE,GAAWF,EAAAA,EAAAA,MAEXG,GAASC,EAAAA,EAAAA,MAETC,GAAYL,EAAAA,EAAAA,KAAI,GAEhBM,EAAWA,KACbD,EAAUE,OAAQ,EAElB,MAAMC,GAAOC,EAAAA,EAAAA,OACbC,EAAAA,EAAAA,IAA2BF,EAAMT,EAAMQ,MAAON,EAASM,OACtDI,MAAMC,IACHC,QAAQC,IAAI,wBAEZX,EAAOY,KAAK,IAAI,IAEnBC,OAAOC,IAEJ,OADAJ,QAAQC,IAAIG,EAAMC,MACVD,EAAMC,MACV,IAAK,oBACDhB,EAASK,MAAQ,oBACjB,MACJ,IAAK,sBACDL,EAASK,MAAQ,uCACjB,MACJ,IAAK,sBACDL,EAASK,MAAQ,oBACjB,MACJ,QACIL,EAASK,MAAQ,gCACjB,MACR,GACF,EAGAY,EAAmBC,UACrBf,EAAUE,OAAQ,EAClB,MAAMc,EAAW,IAAIC,EAAAA,GACfC,QAAeC,EAAAA,EAAAA,KAAgBf,EAAAA,EAAAA,MAAWY,GAI1CI,QAAaC,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,IAAIC,EAAAA,EAAI,QAASL,EAAOM,KAAKC,MAClDL,EAAKM,SAMN5B,EAAOY,KAAK,MALZF,QAAQC,IAAI,gBACZkB,EAAAA,EAAAA,KAAQvB,EAAAA,EAAAA,OAAWE,MAAK,KACpBT,EAASK,MAAQ,8CAA8C,IAItE,E,OAGL0B,EAAAA,EAAAA,KAAU,KACNC,SAASC,MAAQ,eAAe,I,2sBClExC,MAAMC,EAAc,EAEpB,O","sources":["webpack://gimko/./src/views/SignIn.vue","webpack://gimko/./src/views/SignIn.vue?093c"],"sourcesContent":["<script setup>\n    import { ref, onMounted } from 'vue';\n    import {\n        getAuth,\n        signInWithEmailAndPassword,\n        GoogleAuthProvider,\n        signInWithPopup,\n        signOut,\n    } from \"firebase/auth\";\n    import { useRouter } from 'vue-router';\n    import { doc, getDoc } from 'firebase/firestore';\n    import db from '@/firebase/init';\n    import { defaultUser } from '@/firebase/defaultStructs';\n\n    const email = ref(\"\");\n    const password = ref(\"\");\n    \n    const errorMsg = ref();\n\n    const router = useRouter(); // Get a refrence to router\n\n    const signingIn = ref(false);\n\n    const register = () => {\n        signingIn.value = true;\n        // Need .value because ref()\n        const auth = getAuth ();\n        signInWithEmailAndPassword(auth, email.value, password.value)\n        .then((data) => {\n            console.log(\"Successfully signed!\");\n            // console.log(auth.currentUser) // Log user\n            router.push('/');\n        })\n        .catch((error) => {\n            console.log(error.code);\n            switch (error.code) {\n                case \"auth/invalidEmail\":\n                    errorMsg.value = \"Nederīgs ē-pasts!\";\n                    break;\n                case \"auth/user-not-found\":\n                    errorMsg.value = \"Netika atrasts konts ar tādu ēpastu!\";\n                    break\n                case \"auth/wrong-password\":\n                    errorMsg.value = \"Nepareiza parole!\";\n                    break;\n                default:\n                    errorMsg.value = \"Nepareizs ē-pasts vai parole.\";\n                    break;\n            }\n        });\n    };\n\n    const signInWithGoogle = async () => {\n        signingIn.value = true;\n        const provider = new GoogleAuthProvider();\n        const result = await signInWithPopup(getAuth(), provider);\n        // console.log(result.user); // Log user\n\n        // Check if user exists\n        const uDoc = await getDoc(doc(db, 'users', result.user.uid));\n        if (!uDoc.exists()) { // Make user if doesn't exist\n            console.log(\"No account!\");\n            signOut(getAuth()).then(() => {\n                errorMsg.value = \"Netika atrasts lietotājs. Izveidojiet kontu!\"\n            });\n        } else {\n            router.push(\"/\");\n        };\n    };\n\n    onMounted(() => {\n        document.title = \"gimko | Ieiet\";\n    });\n</script>\n\n<template>\n    <h1>Ieiet</h1>\n    <article>\n        <p><input type=\"text\" placeholder=\"Ē-pasts\" v-model=\"email\"/></p>\n        <p><input type=\"password\" placeholder=\"Parole\" v-model=\"password\"/></p>\n        <p v-if=\"errorMsg\">{{ errorMsg }}</p>\n        <p>\n            <button v-if=\"!signingIn\" class=\"hover-up-p\"  @click=\"register()\">\n                <p>Iesniegt</p>\n                <div class=\"bg\"></div>\n            </button>\n        </p>\n    \n        <p>\n            <button v-if=\"!signingIn\" class=\"hover-up-p\" @click=\"signInWithGoogle\">\n                <p> Pievienoties ar Google</p>\n                <div class=\"bg accent\"></div>\n            </button>\n        </p>\n        \n        <div class=\"bg\"></div>\n    </article>\n</template>\n\n<style lang=\"scss\">\n    @import '../assets/css/signIn.scss';\n    @import '../assets/css/base.scss';\n    @import '../assets/css/colors.scss';\n</style>","import script from \"./SignIn.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SignIn.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SignIn.vue?vue&type=style&index=0&id=b6fe69c2&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["email","ref","password","errorMsg","router","useRouter","signingIn","register","value","auth","getAuth","signInWithEmailAndPassword","then","data","console","log","push","catch","error","code","signInWithGoogle","async","provider","GoogleAuthProvider","result","signInWithPopup","uDoc","getDoc","doc","db","user","uid","exists","signOut","onMounted","document","title","__exports__"],"sourceRoot":""}